# 编译原理—词法分析器实验报告

## 实验目的

根据编译原理课程知识，编写一个词法分析器，以此深入理解词法分析的规则。

## 实验内容

1. 选择一个你熟悉的程序设计语言，找到它的规范（referrence or standard）。在规范中找到其词法的BNF或正规式描述。

2. 选择该语言的一个子集（能够构成一个mini的语言，该语言至少能够进行函数调用、控制流语句（分支或循环）、简单的运算和赋值操作。）给出该mini语言的词法的正规文法或正规式。

3. 将该正规文法或正规式转换为NFA。给出转换过程。

4. 将上述NFA转换为DFA，并最小化。给出具体过程。

5. 根据最小化后的DFA写出词法分析程序。将该词法分析程序打印出来。

6. 用mini语言写出若干个小程序作为测试用例。用上述词法分析程序对这些小程序进行词法分析，并将测试用例和分析结果打印出来。

### 实验假设



```c++
C:\Users\Serica\Archive\大三上\编译原理\MiniC_Compiler\Lexer\x64\Release>Lexer.exe C:\Users\Serica\Archive\大三上\编译原理\MiniC_Compiler\Lexer\test\code.cpp
Source code:
class Helper {
private:
    Helper();
    ~Helper();
public:
    static struct tool {
        enum color {
            RED,
            BLUE,
            GREEN
        };
        enum sex {
            MALE,
            FEMALE
        };
    } tool;
    static bool greater_or_equal_than(int a, int b) {
        if((a >= b) && ((a > b) || (a == b)))
            return true;
        return false;
    }
};
int main() {
    typedef int myInt;
    myInt myNum = 10;
    char c = 'a';
    const int hisNum = (int) c;
    int herNum = myNum - hisNum;
    bool flag = true;
    do {
        myNum %= 22;
    } while (!flag);
    for(int i = 0; i < 100; i++) {
        if(herNum == myNum) {
            break;
        }
        else if(Helper::greater_or_equal_than(herNum, myNum)) {
            herNum--;
            continue;
        }
        else {
            herNum++;
            continue;
        }
        myNum = (myNum != hisNum ? ++myNum : --myNum);
    }
    switch(herNum) {
        case 10:
            herNum *= myNum;
            break;
        case 20:
            herNum = Helper::tool.RED;
        default:
            herNum -= myNum;
    }
    return 0;
}
Building Min DFA now... It can take minutes, please be patient and wait...
...Regular expressions loaded, start to build NFA from them.
...NFA already built, takes 0.001s, now start to build DFA from the NFA.
...DFA already built, takes 53.793s, now start to minimize the DFA.
...Min DFA already built, takes 0.003s, ready to do lexical analysis.
< 0     class   class >
< 1     id      Helper >
< 2     {       { >
< 3     private private >
< 4     :       : >
< 5     id      Helper >
< 6     (       ( >
< 7     )       ) >
< 8     ;       ; >
< 9     ~       ~ >
< 10    id      Helper >
< 11    (       ( >
< 12    )       ) >
< 13    ;       ; >
< 14    public  public >
< 15    :       : >
< 16    static  static >
< 17    struct  struct >
< 18    id      tool >
< 19    {       { >
< 20    enum    enum >
< 21    id      color >
< 22    {       { >
< 23    id      RED >
< 24    ,       , >
< 25    id      BLUE >
< 26    ,       , >
< 27    id      GREEN >
< 28    }       } >
< 29    ;       ; >
< 30    enum    enum >
< 31    id      sex >
< 32    {       { >
< 33    id      MALE >
< 34    ,       , >
< 35    id      FEMALE >
< 36    }       } >
< 37    ;       ; >
< 38    }       } >
< 39    id      tool >
< 40    ;       ; >
< 41    static  static >
< 42    bool    bool >
< 43    id      greater_or_equal_than >
< 44    (       ( >
< 45    int     int >
< 46    id      a >
< 47    ,       , >
< 48    int     int >
< 49    id      b >
< 50    )       ) >
< 51    {       { >
< 52    if      if >
< 53    (       ( >
< 54    (       ( >
< 55    id      a >
< 56    gte     >= >
< 57    id      b >
< 58    )       ) >
< 59    &&      && >
< 60    (       ( >
< 61    (       ( >
< 62    id      a >
< 63    gt      > >
< 64    id      b >
< 65    )       ) >
< 66    ||      || >
< 67    (       ( >
< 68    id      a >
< 69    eq      == >
< 70    id      b >
< 71    )       ) >
< 72    )       ) >
< 73    )       ) >
< 74    return  return >
< 75    true    true >
< 76    ;       ; >
< 77    return  return >
< 78    false   false >
< 79    ;       ; >
< 80    }       } >
< 81    }       } >
< 82    ;       ; >
< 83    int     int >
< 84    main    main >
< 85    (       ( >
< 86    )       ) >
< 87    {       { >
< 88    typedef typedef >
< 89    int     int >
< 90    id      myInt >
< 91    ;       ; >
< 92    id      myInt >
< 93    id      myNum >
< 94    =       = >
< 95    integer 10 >
< 96    ;       ; >
< 97    char    char >
< 98    id      c >
< 99    =       = >
< 100   '       ' >
< 101   id      a >
< 102   '       ' >
< 103   ;       ; >
< 104   const   const >
< 105   int     int >
< 106   id      hisNum >
< 107   =       = >
< 108   (       ( >
< 109   int     int >
< 110   )       ) >
< 111   id      c >
< 112   ;       ; >
< 113   int     int >
< 114   id      herNum >
< 115   =       = >
< 116   id      myNum >
< 117   -       - >
< 118   id      hisNum >
< 119   ;       ; >
< 120   bool    bool >
< 121   id      flag >
< 122   =       = >
< 123   true    true >
< 124   ;       ; >
< 125   do      do >
< 126   {       { >
< 127   id      myNum >
< 128   %=      %= >
< 129   integer 22 >
< 130   ;       ; >
< 131   }       } >
< 132   while   while >
< 133   (       ( >
< 134   !       ! >
< 135   id      flag >
< 136   )       ) >
< 137   ;       ; >
< 138   for     for >
< 139   (       ( >
< 140   int     int >
< 141   id      i >
< 142   =       = >
< 143   integer 0 >
< 144   ;       ; >
< 145   id      i >
< 146   lt      < >
< 147   integer 100 >
< 148   ;       ; >
< 149   id      i >
< 150   ++      ++ >
< 151   )       ) >
< 152   {       { >
< 153   if      if >
< 154   (       ( >
< 155   id      herNum >
< 156   eq      == >
< 157   id      myNum >
< 158   )       ) >
< 159   {       { >
< 160   break   break >
< 161   ;       ; >
< 162   }       } >
< 163   else    else >
< 164   if      if >
< 165   (       ( >
< 166   id      Helper >
< 167   :       : >
< 168   :       : >
< 169   id      greater_or_equal_than >
< 170   (       ( >
< 171   id      herNum >
< 172   ,       , >
< 173   id      myNum >
< 174   )       ) >
< 175   )       ) >
< 176   {       { >
< 177   id      herNum >
< 178   --      -- >
< 179   ;       ; >
< 180   continue        continue >
< 181   ;       ; >
< 182   }       } >
< 183   else    else >
< 184   {       { >
< 185   id      herNum >
< 186   ++      ++ >
< 187   ;       ; >
< 188   continue        continue >
< 189   ;       ; >
< 190   }       } >
< 191   id      myNum >
< 192   =       = >
< 193   (       ( >
< 194   id      myNum >
< 195   !       ! >
< 196   =       = >
< 197   id      hisNum >
< 198   ?       ? >
< 199   ++      ++ >
< 200   id      myNum >
< 201   :       : >
< 202   --      -- >
< 203   id      myNum >
< 204   )       ) >
< 205   ;       ; >
< 206   }       } >
< 207   switch  switch >
< 208   (       ( >
< 209   id      herNum >
< 210   )       ) >
< 211   {       { >
< 212   case    case >
< 213   integer 10 >
< 214   :       : >
< 215   id      herNum >
< 216   *=      *= >
< 217   id      myNum >
< 218   ;       ; >
< 219   break   break >
< 220   ;       ; >
< 221   case    case >
< 222   integer 20 >
< 223   :       : >
< 224   id      herNum >
< 225   =       = >
< 226   id      Helper >
< 227   :       : >
< 228   :       : >
< 229   id      tool >
< 230   .       . >
< 231   id      RED >
< 232   ;       ; >
< 233   default default >
< 234   :       : >
< 235   id      herNum >
< 236   -=      -= >
< 237   id      myNum >
< 238   ;       ; >
< 239   }       } >
< 240   return  return >
< 241   integer 0 >
< 242   ;       ; >
< 243   }       } >
```

